<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns#">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="DiRT RALLY 2.0 Community Event graphs"/>
    
    <meta property="og:title" content="Dirt Rally 2 Graphs" />
    <meta property="og:description" content="DiRT RALLY 2.0 Community Event graphs" />
    <meta property="og:url" content="https://www.chrisraff.com/dirtrally2" />
    <meta property="og:image" content="https://www.chrisraff.com/dirtrally2/examplegraph.png" />

	<title>DiRT RALLY 2.0 Events | Chris Raff</title>

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-120805992-1"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'UA-120805992-1');
	</script>
</head>
<!-- https://www.w3schools.com/w3css/4/w3.css -->
<link rel="stylesheet" href="w3.css">

<script src="Chart.bundle.min.js"></script>
<script src="dirtrallycharts.js"></script>

<div class="w3-container w3-light-grey">
    <h2 >Community Event Viewer</h2>
    <h3 id="stageInfo"></h3>
    <div class="w3-row">
        <div class="w3-col" style="width:fit-content; padding-right: 30px;">
            <p id="stageDate"></p>
        </div>
        
        <div class="w3-col" style="width:fit-content">
            <p><a id="stageLink">Link to this stage</a></p>
        </div>
    </div>
</div>

<div class="w3-row w3-padding">
    <div class="w3-row">
        <div class="w3-col w3-padding" style="width:fit-content">
            <label for="category">Group by:</label>
            <select id="category" oninput="categoryUpdate()">
                <option value="none">None</option>
                <option value="vehicleName" selected>Car</option>
                <option value="platform">Platform</option>
                <option value="wheel">Controller</option>
                <option value="assist">Assists</option>
            </select>
        </div>

        <div class="w3-col w3-padding" style="width:fit-content">
            <label for="chartType">Distributions:</label>
            <select id="chartType" oninput="chartTypeUpdate()">
                <option value="stacked">Stacked</option>
                <option value="relative">Absolute</option>
                <option value="normal">Normalized</option>
            </select>
        </div>
    </div>

    <div class="w3-row">
        <div class="w3-half">
            <div class="w3-container">
                <canvas id="distributions" width="100" height=90></canvas>
            </div>

        </div>
        <div class="w3-half">
            <div class="w3-container">
                <canvas id="counts" width="100" height=90></canvas>
            </div>
        </div>
    </div>

    <div class="w3-row">
        <div class="w3-col w3-padding" style="width:fit-content">
            <input id="username" onfocusout="userUpdate()" placeholder="Username" autocorrect="off">
            <p id="userNotFound" hidden>No matching username found</p>
        </div>
        <div class="w3-container w3-col" style="width:fit-content">
            <table id="userTable" class="w3-table-all">
                <tr>
                    <th>Rank</th>
                    <th>Name</th>
                    <th>Car</th>
                    <th>Time</th>
                </tr>
            </table>
        </div>
    </div>
</div>

<h3 class="w3-padding">Select a Stage:</h3>
<div id="stage-selector" class="w3-container w3-padding">
    <!-- https://www.w3schools.com/w3css/w3css_tabulators.asp -->
    <div class="w3-bar w3-black">
        <button class="w3-bar-item w3-button tablink w3-light-blue" onclick="// make call to load other category">Daily</button>
    </div>

    <!-- TODO year selector? -->
    
    <div id="category-daily" class="w3-container w3-border w3-padding challenge-category" style="height:400px;overflow:auto">
        <table id="challengeTable" class="w3-table-all">
            <tr>
                <th>Date</th>
                <th>Class</th>
                <th>Event</th>
                <th>Stage</th>
                <th>Country</th>
                <th>Name</th>
            </tr>
            <tr>
                <td>Loading...</td>
            </tr>
        </table>
    </div>
</div>

<a href="https://dirtrally2.com/community-events" class="w3-text-grey w3-padding" target="_blank">Data from Dirt Rally 2.0 Community Events Page</a>

<div class="w3-container w3-center">
    <p class="w3-text-dark-grey">&copy; Chris Raff 2020</p>
</div>

</html>
